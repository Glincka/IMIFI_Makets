\usepackage[utf8]{inputenc} %кодировки
\usepackage[T2A]{fontenc} %кодировки
\usepackage[english,russian]{babel} 

\ifxetex

\usepackage[no-math]{fontspec}
\setmainfont{DinPro}[
    Path=./Fonts/,
    Extension = .otf,
    UprightFont=*,
    BoldFont=*_bold,
    ItalicFont=*_italic,
    BoldItalicFont=*_bolditalic
    ]
\fi

\usepackage[most]{tcolorbox}
%\usepackage[mathscr]{eucal}

\usepackage{ifxetex}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{graphpap}
\usepackage{ragged2e}
\usepackage{amsfonts}
\usepackage{amsmath}
%\usepackage{nath}
\usepackage{amssymb}
\usepackage{amstext}
\usepackage{indentfirst}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{pgf}
\usepackage{pgfplots}
\usepackage{multicol}
\usepackage{tabularx}
\usepackage{caption}
\usepackage{longtable}
\usetikzlibrary{arrows,shapes,positioning,shadows,trees}
\usepackage{multirow}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5555
% Графические пакеты 
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{pgfplots}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%555

% алгоритмы на псевдокоде

% алгоритмы на псевдокоде
\usepackage[ruled]{algorithm}
\usepackage{algorithmicx}
\usepackage{ifthen} %простейшие средства программирования 
\usepackage{algpseudocode}
\usepackage{enumitem}
\usepackage{textcase} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
% Русский псевдокод
\captionsetup[ruled]{labelsep=period}
\renewcommand{\thealgorithm}{\arabic{algorithm}}%



\floatname{algorithm}{Алгоритм}
\algrenewcommand\algorithmicrequire{\textbf{Вход: }}
\algrenewcommand\algorithmicensure{\textbf{Выход: }}
\algrenewcommand\algorithmicwhile{\textbf{До тех пор пока}}
	\algrenewcommand\algorithmicdo{\textbf{выполнять}}
	\algrenewcommand\algorithmicrepeat{\textbf{Повторять}}
	\algrenewcommand\algorithmicuntil{\textbf{Пока выполняется}}
	\algrenewcommand\algorithmicend{\textbf{Конец}}
	\algrenewcommand\algorithmicif{\textbf{Если}}
	\algrenewcommand\algorithmicelse{\textbf{иначе}}
	\algrenewcommand\algorithmicthen{\textbf{тогда}}
	\algrenewcommand\algorithmicfor{\textbf{Для}}
	\algrenewcommand\algorithmicforall{\textbf{Выполнить для всех}}
	\algrenewcommand\algorithmicfunction{\textbf{Функция}}
	\algrenewcommand\algorithmicprocedure{\textbf{Процедура}}
	\algrenewcommand\algorithmicloop{\textbf{Зациклить}}
	\algrenewcommand\algorithmicreturn{\textbf{Возвратить}}
	\algrenewtext{EndWhile}{\textbf{Конец цикла}}
	\algrenewtext{EndLoop}{\textbf{Конец зацикливания}}
	\algrenewtext{EndFor}{\textbf{Конец цикла}}
	\algrenewtext{EndFunction}{\textbf{Конец функции}}
	\algrenewtext{EndProcedure}{\textbf{Конец процедуры}}
	\algrenewtext{EndIf}{\textbf{Конец условия}}
	\algrenewtext{EndFor}{\textbf{Конец цикла}}
	\algrenewtext{BeginAlgorithm}{\textbf{Начало алгоритма}}
	\algrenewtext{EndAlgorithm}{\textbf{Конец алгоритма}}
	\algrenewtext{BeginBlock}{\textbf{Начало блока. }}
	\algrenewtext{EndBlock}{\textbf{Конец блока}}
	\algrenewtext{ElsIf}{\textbf{иначе если }}
		
\algloop{description}
	\algnewcommand\algorithmicdescription{\textbf{Описание алгоритма}}
\renewcommand{\listalgorithmname}{Список алгоритмов}
%\renewcommand{\@biblabel}[1]{#1.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55555

\def\No{\textnumero} 


\makeatletter
\newcommand{\realasbuk}[1]{\expandafter\russian@realalph\csname c@#1\endcsname}
\newcommand{\realAsbuk}[1]{\expandafter\russian@realAlph\csname c@#1\endcsname}

\def\russian@realAlph#1{\ifcase#1\or
   А\or Б\or В\or Г\or Д\or Е\or Ж\or
   З\or И\or К\or Л\or М\or Н\or О\or
   П\or Р\or С\or Т\or У\or Ф\or Х\or
   Ц\or Ч\or Ш\or Щ\or Э\or Ю\or Я\else\xpg@ill@value{#1}{russian@Alph}\fi}
\def\russian@realalph#1{\ifcase#1\or
   а\or б\or в\or г\or д\or е\or ж\or
   з\or и\or к\or л\or м\or н\or о\or
   п\or р\or с\or т\or у\or ф\or х\or
   ц\or ч\or ш\or щ\or э\or ю\or я\else\xpg@ill@value{#1}{russian@alph}\fi}

\AddEnumerateCounter{\realasbuk}{\russian@realalph}{щ}
\AddEnumerateCounter{\realAsbuk}{\russian@realAlph}{Щ}
%\makeatother

%отбивка в списках
\setlist[itemize]{
    label=--,
    noitemsep,
    labelindent=\parindent,
    leftmargin=*,
    wide
}
\setlist[enumerate,1]{
    label=\arabic*),
    ref = \arabic*),
    left=\parindent, 
    wide
}
\setlist[enumerate,2]{
    label=\realasbuk*),
    ref = \theenumi.\realasbuk*),
    wide=\dimexpr\parindent+2ex, leftmargin=*    
}

%\usefonttheme[onlymath]{serif}
\usetikzlibrary{decorations}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\makeatother

\captionsetup[table]{name=Таблица,labelsep=endash,justification=centering,singlelinecheck=off}
\captionsetup[figure]{name=Рисунок,,labelsep=endash,justification=centering,singlelinecheck=off}

\setbeamersize{text margin left=0.8cm, text margin right=0.8cm}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%555



% https://deic.uab.cat/~iblanes/beamer_gallery/index.html - выбор тем и цветов презентации

\mode<presentation>
{

%
\usetheme{CambridgeUS}
%\usefonttheme{serif}
\ifXeTeX
\usefonttheme{serif}
\usefonttheme{professionalfonts}
\else
\usefonttheme[onlymath]{serif}
\fi
	
\definecolor{IMorange}{RGB}{252, 34, 0} 
\definecolor{IMgray}{RGB}{71, 70, 70}

\setbeamercolor{palette primary}{bg=IMgray,fg=white}
\setbeamercolor{palette secondary}{bg=IMgray,fg=white}
\setbeamercolor{palette tertiary}{bg=IMgray,fg=white}
\setbeamercolor{palette quaternary}{bg=IMgray,fg=white}
\setbeamercolor{structure}{fg=IMgray} % itemize, enumerate, etc
\setbeamercolor{author in head/foot}{bg=IMorange,fg=white}
\setbeamercolor{section in toc}{fg=IMgray} % TOC sections

% Override palette coloring with secondary
\setbeamercolor{subsection in head/foot}{bg=IMorange,fg=white}
			
    \setbeamercovered{transparent}
  \setbeamertemplate{navigation symbols}{}
    \setbeamertemplate{caption}[numbered]

	\setbeamertemplate{footline}
	{%
	 \leavevmode%
		\hbox{%
		\begin{beamercolorbox}[wd=.15\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm,rightskip=.3cm]{white}%
			\hspace*{.45cm}\vspace*{-1pt}\includegraphics[height=2.5ex]{IMfoot.png}												
												%\hfill \insertshortauthor
		\end{beamercolorbox}
		%			
			\begin{beamercolorbox}[wd=.55\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.1cm,rightskip=.3cm]{title in head/foot}%
				\usebeamerfont{title in head/foot}\centering\insertshorttitle
			\end{beamercolorbox}}%
			\begin{beamercolorbox}[wd=.3\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm,rightskip=.3cm,center]{author in head/foot}%
				\usebeamerfont{author in head/foot}%
						  \insertshortauthor\hfill \insertframenumber{}/\inserttotalframenumber
			\end{beamercolorbox}%
		\vskip0pt%
	}
	\setbeamertemplate{navigation symbols}{}
}

\newcounter{TestReviwer}
\makeatletter
%First empty definitions
\def\direction@internal{}
\def\supervisor@internal{}
\def\reviewer@internal{}
\newcommand{\direction}[1]{\gdef\direction@internal{#1}}
\newcommand{\supervisor}[1]{\gdef\supervisor@internal{#1}}
\newcommand{\reviewer}[1]{\setcounter{TestReviwer}{1}\gdef\reviewer@internal{#1}}
\newcommand{\insertdirection}{\direction@internal}
\newcommand{\insertsupervisor}{\supervisor@internal}
\newcommand{\insertreviewer}{\reviewer@internal}

\newcommand{\checkfor}[1]{%
\ifnum\value{TestReviwer}=0
	\begin{tabular}{lr}
		Научный руководитель & \insertsupervisor\\
	\end{tabular}
  \else%
	\begin{tabular}{lr}
		Научный руководитель & \insertsupervisor\\
		Рецензент & \insertreviewer\\
	\end{tabular}
  \fi%
}

\makeatother 

\defbeamertemplate*{title page}{customized}[1][]
{
	\begin{center}
		\usebeamerfont{institute}\insertinstitute
	\end{center}
	\vfill
	\begin{block}{}
  		\usebeamerfont{title}\centering\inserttitle
	\end{block}	  
	\vfill		
	\begin{center}
		\usebeamerfont{author}\insertauthor
	\end{center}
	\vfill
	\begin{center}
		\insertdirection
	\end{center}
	\vfill
	\begin{center}
		\checkfor{insertreviewer}
	\end{center}
	\vfill
	\begin{center}
  		\usebeamerfont{date}\insertdate
	\end{center}
  %\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic
}


%Более крупный шрифт для подзаголовков титульного листа
\setbeamerfont{institute}{size=\large}
\setbeamerfont{title}{size=\LARGE, series=\bfseries}
\setbeamerfont{author}{size=\Large, series=\bfseries}
\setbeamerfont{date}{size=\footnotesize}

%Задание команды (\bluetext) для выделения конкретным (синим) цветом
%(используйте \alert для выделения цветом выбранной "темы")
\setbeamercolor{bluetext_color}{fg=blue}
\newcommand{\bluetext}[1]{{\usebeamercolor[fg]{bluetext_color}#1}}

\renewcommand{\raggedright}{\leftskip=0pt \rightskip=0pt plus 0cm}

