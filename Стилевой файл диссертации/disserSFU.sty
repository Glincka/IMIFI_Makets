% стилевой пакет для написания диссертации в Latex согласно ГОСТ ТГУ
% Авторы:
% к.ф.-м.н., Солдатенко Александр Александрович, asoldatenko@sfu-kras.ru
% к.ф.-м.н., доцент Семенова Дарья Владиславовна, dariasdv@gmail.com

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55
% шрифты
\usepackage[utf8]{inputenc} %кодировки
\usepackage[T2A]{fontenc} %кодировки
\usepackage[russian]{babel} 

\usepackage[square,numbers,sort&compress]{natbib}

\usepackage{url}
\urlstyle{same}
\bibliographystyle{utf8gost780u}
\usepackage{textcomp} % стилевой пакет textcomp, открывающий доступ к большому числу типографских значков
%математические шрифты и оформления
\usepackage{amsmath, amssymb, mathrsfs} 
\usepackage{amsfonts}
\usepackage{amstext}
\usepackage{amsthm}
\usepackage{cases}
\usepackage[mathscr]{eucal}

\usepackage{tempora}   % Times New Roman for text


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
% оформление текста
\usepackage{lscape} % разворот страницы
\usepackage{indentfirst}% отделять первую строку раздела абзацным отступом тоже
\usepackage{geometry} % настройка параметров страницы



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
% Пакеты для красивых таблиц в LaTeX
% почитать можно здесь http://mydebianblog.blogspot.ru/2013/01/advanced-tables-in-latex.html
\usepackage{booktabs} % Книжные таблицы  
\usepackage{array} % таблицы 
\usepackage{longtable} % многостраничные таблицы
\usepackage{tabularx} % стоит использовать для создания больших и сложных таблиц с разделением по страницам, с кучей текста в ячейках
\usepackage{multicol}
\usepackage{multirow} % улучшенное форматирование таблиц
\usepackage{color,colortbl} % цветные таблицы
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5555
% Графические пакеты 

\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{er}
\usetikzlibrary{automata}
\usetikzlibrary{graphs}
\usetikzlibrary{intersections}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{spy}
\usepackage{pgf}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepackage{tikz-cd}
\usetikzlibrary{decorations.pathmorphing}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
% заголовки
%\usepackage{topcapt}
\usepackage{titlesec}
\usepackage{tocloft} % оформление оглавлений 
\usepackage{titleps}
\usepackage{titletoc}
\usepackage{caption} % продвинутые заголовки 
\usepackage{subcaption}
\usepackage{float} %плавающие объекты
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
%навигация 
\usepackage{imakeidx} %предметный указатель
%гиперссылки
\usepackage[colorlinks, linkcolor=black, citecolor=black, urlcolor=black, pdftex, pdfhighlight=/O]{hyperref} 

\usepackage[ruled]{algorithm}
\usepackage{ifthen} %простейшие средства программирования 
\usepackage{etoolbox}
\usepackage{algpseudocode}
\usepackage[shortlabels]{enumitem}
\usepackage{textcase} 
\usepackage{spverbatim}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Параметры страницы 
\pagestyle{headings}
\geometry{top=2.0cm}
\geometry{bottom=2.0cm}
\geometry{left=3.0cm}
\geometry{right=1.0cm}

\makeatletter
\renewcommand{\@evenhead}{}
\renewcommand{\@evenfoot}{\hfil\thepage\hfil}
\renewcommand{\@oddhead}{}
\renewcommand{\@oddfoot}{\hfill \thepage \hfill}
 
\setlength{\parindent}{1.25cm}
\linespread{1.3}  % полуторный интервал





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\def\No{\textnumero} % определить команду №, в последних babel.sty ее нет


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55
% Параметры главы

\titleformat{\section}{\normalfont\bfseries}{\thesection}{1ex}{}
\titleformat{\subsection}{\normalfont\bfseries}{\thesubsection}{1ex}{}
\titleformat{\chapter}{\normalfont\bfseries}{\noindent\thechapter}{1ex}{}
\titlespacing{\section}{\parindent}{*2}{*2}
\titlespacing{\subsection}{\parindent}{*2}{*2}
\titlespacing{\chapter}{\parindent}{0pt}{*2}

\titlespacing{\topchapter}{\parindent}{0pt}{0pt}
\titlespacing{\section}{\parindent}{0.75\baselineskip}{0.75\baselineskip}
\titlespacing{\subsection}{\parindent}{0.75\baselineskip}{0.75\baselineskip}
\titlespacing{\chapter}{\parindent}{0pt}{0.75\baselineskip}



\makeatletter
\newcommand{\zz}{\rule{4mm}{.6pt}}

\renewcommand*\l@chapter{ \@dottedtocline{1} {0em}{2em}}

 \def\ps@plain{\def\@oddhead{}
   \def\@oddfoot{\rm\hfil\thepage\hfil}
	 \def\@evenfoot{\rm\hfil\thepage\hfil}
  \def\@evenhead{}
  \let\@evenfoot\@oddfoot}
	
	
\renewcommand\chapter{\clearpage\vspace*{-10mm}
                    \global\@topnum\z@
                    \@afterindentfalse
                    \secdef\@chapter\@schapter}
										
\setcounter{secnumdepth}{3} % глубина нумерация
\numberwithin{equation}{chapter} % нумерация по главам
\setcounter{figure}{0} 
\setcounter{equation}{0}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% заголовки окружений

\newtheorem{Theorem}{\indent Tеорема}[chapter]
\newtheorem{Lemma}{\indent Лемма}[chapter]
\newtheorem{Example}{\indent Пример}[chapter]
\newtheorem{Preposition}{\indent Предложение}[section]
\newtheorem{Remark}{\indent Замечание}[chapter]
\newenvironment{Proof}{\indent \textbf{Доказательство.}}{\hfill $\blacksquare$}
\newtheorem{Corollary}{\indent Следствие}[chapter]
\theoremstyle{definition}
\newtheorem{defin}{\indent Определение}[chapter]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Оглавление по ГОСТ
\addto\captionsrussian{
\def\contentsname{СОДЕРЖАНИЕ}
\def\refname{СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ}
}
\renewcommand{\cfttoctitlefont}{\hfill\bfseries}
\renewcommand{\cftaftertoctitle}{\hfill}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5555


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\makeindex[columns=1,title=СПИСОК СОКРАЩЕНИЙ] % сделать предметный указатель
% переопределение заголовков к таблицам и рисункам

\captionsetup[table]{name=Таблица,labelsep=endash,justification=raggedright,singlelinecheck=off}
\captionsetup[figure]{name=Рисунок,,labelsep=endash,justification=centering,singlelinecheck=off}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
% Русский псевдокод
\captionsetup[ruled]{labelsep=period}
\renewcommand{\thealgorithm}{\thechapter.\arabic{algorithm}}%

\floatname{algorithm}{Алгоритм}
\algrenewcommand\algorithmicrequire{\textbf{Вход: }}
\algrenewcommand\algorithmicensure{\textbf{Выход: }}
\algrenewcommand\algorithmicwhile{\textbf{До тех пока}}
	\algrenewcommand\algorithmicdo{\textbf{}}
	\algrenewcommand\algorithmicrepeat{\textbf{Повторять}}
	\algrenewcommand\algorithmicuntil{\textbf{Пока выполняется}}
	\algrenewcommand\algorithmicend{\textbf{Конец}}
	\algrenewcommand\algorithmicif{\textbf{Если}}
	\algrenewcommand\algorithmicelse{\textbf{иначе}}
	\algrenewcommand\algorithmicthen{\textbf{то}}
	\algrenewcommand\algorithmicfor{\textbf{Для}}
	\algrenewcommand\algorithmicforall{\textbf{Выполнить для всех}}
	\algrenewcommand\algorithmicfunction{\textbf{Функция}}
	\algrenewcommand\algorithmicprocedure{\textbf{Процедура}}
	\algrenewcommand\algorithmicloop{\textbf{Зациклить}}
	\algrenewcommand\algorithmicreturn{\textbf{Возвратить}}
	\algrenewtext{EndWhile}{\textbf{Конец цикла}}
	\algrenewtext{EndLoop}{\textbf{Конец зацикливания}}
	\algrenewtext{EndFor}{\textbf{Конец цикла}}
	\algrenewtext{EndFunction}{\textbf{Конец функции}}
	\algrenewtext{EndProcedure}{\textbf{Конец процедуры}}
	\algrenewtext{EndIf}{\textbf{Конец условия}}
	\algrenewtext{EndFor}{\textbf{Конец цикла}}
	\algrenewtext{BeginAlgorithm}{\textbf{Начало алгоритма}}
	\algrenewtext{EndAlgorithm}{\textbf{Конец алгоритма}}
	\algrenewtext{BeginBlock}{\textbf{Начало блока. }}
	\algrenewtext{EndBlock}{\textbf{Конец блока}}
	\algrenewtext{ElsIf}{\textbf{иначе если }}
		
\algloop{description}
	\algnewcommand\algorithmicdescription{\textbf{Описание алгоритма}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55555

\makeatletter
\newcommand{\realasbuk}[1]{\expandafter\russian@realalph\csname c@#1\endcsname}
\newcommand{\realAsbuk}[1]{\expandafter\russian@realAlph\csname c@#1\endcsname}

\def\russian@realAlph#1{\ifcase#1\or
   А\or Б\or В\or Г\or Д\or Е\or Ж\or
   З\or И\or К\or Л\or М\or Н\or О\or
   П\or Р\or С\or Т\or У\or Ф\or Х\or
   Ц\or Ч\or Ш\or Щ\or Э\or Ю\or Я\else\xpg@ill@value{#1}{russian@Alph}\fi}
\def\russian@realalph#1{\ifcase#1\or
   а\or б\or в\or г\or д\or е\or ж\or
   з\or и\or к\or л\or м\or н\or о\or
   п\or р\or с\or т\or у\or ф\or х\or
   ц\or ч\or ш\or щ\or э\or ю\or я\else\xpg@ill@value{#1}{russian@alph}\fi}

\AddEnumerateCounter{\realasbuk}{\russian@realalph}{щ}
\AddEnumerateCounter{\realAsbuk}{\russian@realAlph}{Щ}
%\makeatother

%отбивка в списках
\setlist[itemize]{
    label=--,
    noitemsep,
    labelindent=\parindent,
    leftmargin=*,
    wide
}
\setlist[enumerate,1]{
    label=\arabic*),
    ref = \arabic*),
    left=\parindent, 
    wide
}
\setlist[enumerate,2]{
    label=\realasbuk*),
    ref = \theenumi.\realasbuk*),
    wide=\dimexpr\parindent+2ex, leftmargin=*    
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
% список литературы через точку
\renewcommand{\@biblabel}[1]{#1.} 

\makeatother

\DeclareCaptionSubType[asbuk]{figure}

\captionsetup[subfigure]{labelformat=simple}
%\captionsetup[subtable]{caption=tableheading}
\renewcommand\thesubfigure{\asbuk{subfigure})}
\makeatletter
%\renewcommand\p@subfigure{\thefigure\asbuk{subfigure}}
\makeatother
%\DeclareCaptionSubType*[asbuk]{table}
\captionsetup[subtable]{labelformat=simple}
\renewcommand\thesubtable{\asbuk{subtable})}


%\renewcommand\thesubfigure{(\Asbuk)}

\setlist{nolistsep}

\renewcommand{\bibsection}{\clearpage\section*{\refname}}
\renewcommand{\bibpreamble}{}
\makeatletter
\renewcommand{\@biblabel}[1]{\hspace*{1.25cm}#1.}
\AtBeginDocument{%
  \renewcommand\@bibsetup[1]{%
  \setlength\bibhang{0pt}
  \setlength{\bibsep}{10pt plus 5pt minus 2pt}
    \setlength{\leftmargin}{0pt}%
    \setlength{\itemindent}{1.25cm}%
    \setlength{\itemsep}{-5pt}
    \setlength{\parskip}{0em}
  }%
}
\makeatother
\titleformat{name=\chapter,numberless}[hang]{\filcenter\bfseries}{}{8pt}{}
\renewcommand{\bibsection}{\chapter*{\hfill\refname\hfill}}
\newcounter{appChapter}
\titleclass{\appChapter}{straight}[\chapter]
\def\appChaptername{Приложение}
\titleformat{\appChapter}[hang]
  {\filcenter\bfseries}{\enspace ПРИЛОЖЕНИЕ \theappChapter\enspace}{8pt}{\\}
\titlespacing*{\appChapter}{0pt}{0.75\baselineskip}{0.75\baselineskip}
\renewcommand{\theappChapter}{\realAsbuk{appChapter}}
\titlecontents{appChapter}[0pt]
{}
{{\appChaptername\ \theappChapter \thecontentslabel}\enspace} 
{}
{\titlerule*[1pc]{.}\contentspage\nobreak}
\newcommand\appChapterbreak{\clearpage}
\let\oldchapter\chapter
\renewcommand{\chapter}
{\setcounter{section}{0}
\setcounter{subsection}{0}
\setcounter{Theorem}{0}
\setcounter{equation}{0}
\setcounter{defin}{0}
\setcounter{figure}{0}
\setcounter{table}{0}
\setcounter{Lemma}{0}
\setcounter{Corollary}{0}
\setcounter{Example}{0}
\setcounter{algorithm}{0}\oldchapter}
\let\oldprintindex\printindex
\renewcommand{\printindex}{\addcontentsline{toc}{chapter}{Список сокращений}\oldprintindex}
\let\oldbibliography\bibliography
\renewcommand{\bibliography}{\addcontentsline{toc}{chapter}{Список использованных источников}\oldbibliography}
\let\oldappChapter\appChapter
\renewcommand{\appChapter}
{
\renewcommand{\thedefin}{\theappChapter.\arabic{defin}}
\renewcommand{\thefigure}{\theappChapter.\arabic{figure}}
\renewcommand{\thetable}{\theappChapter.\arabic{table}}
\renewcommand{\theTheorem}{\theappChapter.\arabic{Theorem}}
\renewcommand{\theLemma}{\theappChapter.\arabic{Lemma}}
\renewcommand{\theExample}{\theappChapter.\arabic{Example}}
\renewcommand{\thePreposition}{\theappChapter.\arabic{Preposition}}
\renewcommand{\theRemark}{\theappChapter.\arabic{Remark}}
\renewcommand{\theCorollary}{\theappChapter.\arabic{Corollary}}
\setcounter{section}{0}
\setcounter{subsection}{0}
\setcounter{Theorem}{0}
\setcounter{equation}{0}
\setcounter{defin}{0}
\setcounter{figure}{0}
\setcounter{table}{0}
\setcounter{Lemma}{0}
\setcounter{Corollary}{0}
\setcounter{Example}{0}
\setcounter{algorithm}{0}
\oldappChapter
}